{"visual":{"name":"barChartExample","displayName":"barChartExample","guid":"PBI_CV_A711B394_506C_40FA_8490_F9AF93A9C41D_DEBUG","visualClassName":"Visual","version":"1.0.0","description":"","supportUrl":"","gitHubUrl":""},"apiVersion":"1.1.0","author":{"name":"","email":""},"assets":{"icon":"assets/icon.png"},"externalJS":[],"style":"style/visual.less","capabilities":{"dataRoles":[{"displayName":"Category Data","name":"category","kind":0},{"displayName":"Measure Data","name":"measure","kind":1}],"dataViewMappings":[{"categorical":{"categories":{"for":{"in":"category"},"dataReductionAlgorithm":{"top":{}}},"values":{"select":[{"bind":{"to":"measure"}}]}}}]},"content":{"js":"var powerbi;\r\n(function (powerbi) {\r\n    var extensibility;\r\n    (function (extensibility) {\r\n        var visual;\r\n        (function (visual) {\r\n            var PBI_CV_A711B394_506C_40FA_8490_F9AF93A9C41D;\r\n            (function (PBI_CV_A711B394_506C_40FA_8490_F9AF93A9C41D) {\r\n                var Visual = (function () {\r\n                    function Visual(options) {\r\n                        console.log('Visual constructor', options);\r\n                        this.target = options.element;\r\n                        var svg = this.svg = d3.select(this.target)\r\n                            .append(\"svg\")\r\n                            .attr(\"class\", \"tutorial-svg\");\r\n                        var group = this.group = svg.append(\"g\")\r\n                            .attr(\"class\", \"tutorial-g\");\r\n                        var xAxis = this.xAxis = svg.append(\"g\")\r\n                            .attr(\"class\", \"x axis\");\r\n                        var yAxis = this.yAxis = svg.append(\"g\")\r\n                            .attr(\"class\", \"y axis\");\r\n                    }\r\n                    Visual.converter = function (dataView) {\r\n                        var viewModel = {\r\n                            categories: [],\r\n                            values: []\r\n                        };\r\n                        if (dataView) {\r\n                            var categorical = dataView.categorical;\r\n                            if (categorical) {\r\n                                var categories = categorical.categories;\r\n                                var series = categorical.values;\r\n                                var formatString = dataView.metadata.columns[0].format;\r\n                                if (categories && series && categories.length > 0 && series.length > 0) {\r\n                                    for (var i = 0, catLength = categories[0].values.length; i < catLength; i++) {\r\n                                        viewModel.categories.push({\r\n                                            value: categories[0].values[i],\r\n                                            identity: ''\r\n                                        });\r\n                                        for (var k = 0, seriesLength = series.length; k < seriesLength; k++) {\r\n                                            var value = series[k].values[i];\r\n                                            if (k == 0) {\r\n                                                viewModel.values.push({ values: [] });\r\n                                            }\r\n                                            viewModel.values[i].values.push(value);\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                        return viewModel;\r\n                    };\r\n                    Visual.prototype.update = function (options) {\r\n                        console.log('Visual update', options);\r\n                        var dataViews = options.dataViews;\r\n                        if (!dataViews)\r\n                            return;\r\n                        var viewModel = Visual.converter(dataViews[0]);\r\n                        console.log(viewModel);\r\n                        var data = [];\r\n                        for (var i in viewModel.categories) {\r\n                            var dataPoint = {\r\n                                cat: viewModel.categories[i].value,\r\n                                val: viewModel.values[i].values[0]\r\n                            };\r\n                            data.push(dataPoint);\r\n                        }\r\n                        var margin = { top: 20, right: 20, bottom: 30, left: 40 };\r\n                        var width = options.viewport.width - margin.left - margin.right;\r\n                        var height = options.viewport.height - margin.top - margin.bottom;\r\n                        var x = d3.scale.ordinal()\r\n                            .domain(data.map(function (d) { return d.cat; }))\r\n                            .rangeRoundBands([0, width], .1);\r\n                        var y = d3.scale.linear()\r\n                            .domain([0, d3.max(data, function (d) { return d.val; })])\r\n                            .range([height, 0]);\r\n                        var xAxis = d3.svg.axis()\r\n                            .scale(x)\r\n                            .orient(\"bottom\");\r\n                        var yAxis = d3.svg.axis()\r\n                            .scale(y)\r\n                            .orient(\"left\")\r\n                            .ticks(height / 50)\r\n                            .tickFormat(d3.format(\".0s\"));\r\n                        var svg = this.svg;\r\n                        var group = this.group;\r\n                        svg.attr(\"width\", width + margin.left + margin.right)\r\n                            .attr(\"height\", height + margin.top + margin.bottom);\r\n                        group\r\n                            .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\r\n                        var yAxisLabel = this.yAxis\r\n                            .attr(\"transform\", \"translate(\" + margin.left + \",0)\")\r\n                            .call(yAxis);\r\n                        var xAxisLabel = this.xAxis\r\n                            .attr(\"transform\", \"translate(\" + margin.left + \",\" + height + \")\")\r\n                            .call(xAxis);\r\n                        var bar = svg.selectAll(\".bar\")\r\n                            .data(data);\r\n                        bar.enter().append(\"rect\")\r\n                            .attr(\"class\", \"bar\")\r\n                            .attr(\"x\", function (d) { console.log(d.cat); return x(d.cat); })\r\n                            .attr(\"width\", x.rangeBand())\r\n                            .attr(\"y\", function (d) { return y(d.val); })\r\n                            .attr(\"height\", function (d) { return height - y(d.val); })\r\n                            .attr(\"transform\", \"translate(\" + margin.left + \",0)\");\r\n                        bar.transition()\r\n                            .duration(2)\r\n                            .attr(\"x\", function (d) { console.log(d.cat); return x(d.cat); })\r\n                            .attr(\"width\", x.rangeBand())\r\n                            .attr(\"y\", function (d) { return y(d.val); })\r\n                            .attr(\"height\", function (d) { return height - y(d.val); });\r\n                        bar.exit()\r\n                            .transition()\r\n                            .duration(2)\r\n                            .remove();\r\n                    };\r\n                    Visual.prototype.destroy = function () {\r\n                        this.svg.remove();\r\n                    };\r\n                    return Visual;\r\n                }());\r\n                PBI_CV_A711B394_506C_40FA_8490_F9AF93A9C41D.Visual = Visual;\r\n            })(PBI_CV_A711B394_506C_40FA_8490_F9AF93A9C41D = visual.PBI_CV_A711B394_506C_40FA_8490_F9AF93A9C41D || (visual.PBI_CV_A711B394_506C_40FA_8490_F9AF93A9C41D = {}));\r\n        })(visual = extensibility.visual || (extensibility.visual = {}));\r\n    })(extensibility = powerbi.extensibility || (powerbi.extensibility = {}));\r\n})(powerbi || (powerbi = {}));\r\nvar powerbi;\r\n(function (powerbi) {\r\n    var visuals;\r\n    (function (visuals) {\r\n        var plugins;\r\n        (function (plugins) {\r\n            plugins.PBI_CV_A711B394_506C_40FA_8490_F9AF93A9C41D_DEBUG = {\r\n                name: 'PBI_CV_A711B394_506C_40FA_8490_F9AF93A9C41D_DEBUG',\r\n                displayName: 'barChartExample',\r\n                class: 'Visual',\r\n                version: '1.0.0',\r\n                apiVersion: '1.1.0',\r\n                create: function (options) { return new powerbi.extensibility.visual.PBI_CV_A711B394_506C_40FA_8490_F9AF93A9C41D.Visual(options); },\r\n                custom: true\r\n            };\r\n        })(plugins = visuals.plugins || (visuals.plugins = {}));\r\n    })(visuals = powerbi.visuals || (powerbi.visuals = {}));\r\n})(powerbi || (powerbi = {}));\r\n//# sourceMappingURL=visual.js.map","css":".visual-PBI_CV_A711B394_506C_40FA_8490_F9AF93A9C41D_DEBUG .bar {\n  fill: steelblue;\n}\n.visual-PBI_CV_A711B394_506C_40FA_8490_F9AF93A9C41D_DEBUG .bar:hover {\n  fill: brown;\n}\n.visual-PBI_CV_A711B394_506C_40FA_8490_F9AF93A9C41D_DEBUG .axis {\n  font: 10px sans-serif;\n}\n.visual-PBI_CV_A711B394_506C_40FA_8490_F9AF93A9C41D_DEBUG .axis path,\n.visual-PBI_CV_A711B394_506C_40FA_8490_F9AF93A9C41D_DEBUG .axis line {\n  fill: none;\n  stroke: #000;\n  shape-rendering: crispEdges;\n}\n.visual-PBI_CV_A711B394_506C_40FA_8490_F9AF93A9C41D_DEBUG .x.axis path {\n  display: none;\n}\n.visual-PBI_CV_A711B394_506C_40FA_8490_F9AF93A9C41D_DEBUG .y.axis path {\n  display: none;\n}\n","iconBase64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2RpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpBOEJGMzkxN0NBRDNFMDExQTcxQ0JFODI3ODBCQUE5RSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo3NEY1QjA1NUQ0OTAxMUUwQTgxREI2NjMxMkNEMUNEMyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo3NEY1QjA1NEQ0OTAxMUUwQTgxREI2NjMxMkNEMUNEMyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IFdpbmRvd3MiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5Mjk5RDU1ODBGRDRFMDExQTcxQ0JFODI3ODBCQUE5RSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpBOEJGMzkxN0NBRDNFMDExQTcxQ0JFODI3ODBCQUE5RSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PpDoNX0AAAI3SURBVHjarJRLSFVRFIY9t7SiRDGLoEEPCRJRaCSYkxCiFCXCF+LIMExQLkilgumgwkbdBuWDRC2EomhURCOjgagkXEgKLUKhidobM6H0+i34rxyPnuvEA5/rXPda/1l7739vJxKJxG3ls93+hEKhTILxJhgMftmsiPxdhHw4CfepeR8dCyjWwwB0kZy3iVgCoQ2ewnmXxhrBD7Cgr/ZQVA17fDRPw2UYhzK6G99IsBse6/0QNME+H8FT4EA/YiPqOgA1q4IMzBNuw6iKjkCpj+Av+AdnEEmD3bxfhzvuDk30HaEaLsEkXCO53rN+Bwg5qsvTuj/TjGYtx9nINhRmEx7AYWiFW7AXOuEcbPOUvIZ2mnrl+PkQUbNEh4QHNKUSDdsSBWEOlmxTEfvs26FL9Khe211if6Acgee+xo7xzMgBxfq9qPe3fgWBGN2lEnqtG9nExM7CV3jp3bDos2bKJB0nHFRxAxRpA/5CIXyHh5ABv6GZqd9dJ6iz2SjbxMMypGhJFtTlNzu3kK7xgDxpove8U66FK2A+s6nul5gVVMEL+Ak7lG/T+g9JcIOGar2CRUoogxMwpP/bLTJMB9bRhDbkk5bBUU0y3ES0xS04CBfN9RSHiY90vJK0BHaSzG9h2eejS3RJeVfdtrGzuGyd8CX7Yq6ExuCH63jaVMPkFOv6OibB6DKs2+VEQp+WYBoqERn2sVWWRNN0YurIfeL14U6YkpkLYCSG6e0yqdCxvKBLIm5FgAEAV0nKuwMYRUsAAAAASUVORK5CYII="}}